# 使用组件来构建你的解决方案

<br/><br/>

### 一段解释

对于一个中型甚至更大的应用来说，庞然大物式的架构真的特别糟糕 -- 试想如果有一个很大的软件程序，它依赖特别多东西，这将会很难将其理解清楚，而且这样做常常会产生很多面条代码（复杂、混乱、难以理解的代码）。即使是那些能力强大到足以驯服野兽并且将其『模块化』的聪明的建筑师，也需要在设计上花费很大的力气，每一次变更都要非常小心翼翼的评估对其他依赖事务的影响。终极解决方案就是开发更小的软件程序：将整个应用程序拆分成独立的组件，这些组件不会共享文件，每个组件由很少的几个文件构成（比如API，服务，数据访问，测试等文件）。如此一来，应用程序就非常容易理解了。有些人可能把这叫做『微服务』架构，需要明确的也是很重要的一点就是：微服务并不是你必须要遵循的规范，而是应该把它当成一套原则。你可能使用很多也可能使用很少的原则在一个完完全全的微服务架构中。不管是多还是少，都是有助于降低软件复杂度的。你至少应该划清组件间基本的界限，在项目根目录下为每一个业务组件创建一个文件夹，然后让每个组件能够变成独立的模块。所谓的独立的模块是指：其他组件想要调用该组件的方法时，只能通过其暴露出来的公共接口或者API来实现。这就是保持组件简单、避免依赖地狱、为程序将来成长为完完全全微服务架构铺平道路的基石。

<br/><br/>

### 博客引用：『需要扩展整个应用程序的扩展』

 来自博客 MartinFowler.com

> 虽然整体架构式的应用程序可以做得很成功，但是人们会日益对这样的程序产生挫败感，特别是随着越来越多的应用程序被部署到云端的时候。修改变更是环环相扣的：一个很小的改动需要把整个应用程序重新构建然后部署。久而久之，这样通常很难保持一个好的模块化结构，也使得只修改某个模块内部结构来修改该模块变得很困难，通过扩展整个应用程序来实现的扩展比只扩展某一个部分需要更多的资源。

<br/><br/>

### 博客引用：『那么你的应用程序的架构会尖叫什么呢？』

 来自博客 [uncle-bob](https://8thlight.com/blog/uncle-bob/2011/09/30/Screaming-Architecture.html)

> 你正在看一座图书馆的规划。你可能会看到一个大入口，一个供登记的区域，阅读区，小会议室，以及一排排的放满书的书架。那个建筑会尖叫：图书馆。<br/>

那么你的应用程序的架构会尖叫什么呢？当您查看顶层目录结构和高层包中的源文件时，它们会尖叫：医疗系统、会计系统或库存管理系统吗？或者他们尖叫：Rails，或Spring，Hibernate，或者ASP？

> 注意：这里的『尖叫』是指『能让人恍然大悟』，即看到某些事物就能很清晰的分辨出这是什么。

<br/><br/>

### 好的做法：通过独立的组件来构建你的解决方案

![alt text](https://github.com/i0natan/nodebestpractices/blob/master/assets/images/structurebycomponents.PNG "Structuring solution by components")

<br/><br/>

### 不好的做法：根据技术角色来将文件分组

![alt text](https://github.com/i0natan/nodebestpractices/blob/master/assets/images/structurebyroles.PNG "Structuring solution by technical roles")
